= Configuring TLS Context for Flex Gateway in Connected Mode
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:imagesdir: ../assets/images
:page-mode: conn

Using HTTPS protects the communication between the client and Flex Gateway with encryption.

== Before You Begin
Before configuring the TLS context for a Flex Gateway Connected Mode, you must complete the following tasks:

* xref:flex-install.adoc[Install Flex Gateway]
* xref:flex-{page-mode}-reg-run.adoc[Register and Run Flex Gateway]
* xref:anypoint-security::asm-secret-group-creation-task.adoc[Create a Secret Group]




== Add a TLS Context to Flex Gateway
// Add TLS Context in Secrets Manager
include::partial$docs-anypoint-security/task-flex-add-tls-context.adoc[tags=intro1;intro2;intro3;addContext]
// configure TLS context for Flex Gateway Connected Mode

== Add TLS Context to an API

To add TLS Context to an API Instance in Flex Gateway Connected mode:

. Go to *Anypoint Platform > API Manager*.

. Create a new API Instance deployed with Flex Gateway or edit the endpoint of an existing Flex Gateway API Instance:

* To the create a new API using Flex Gateway as the runtime, complete the xref:docs-api-manager::create-instance-task.adoc[Adding an API Instance] task up to the endpoint configuration page.

* To edit an the existing existing endpoint of an API Instance, in *API Administration* click the name of the API you want to add TLS context to, then *Runtime & Endpoint Configuration*. 

. Configure the end point up to *Scheme*. For more information on configuration, see xref:api-manager::configure-api-task.adoc#configure-an-api-instance-on-flex-gateway-options[Configure an API Instance on Flex Gateway Options].

. Select *HTTPS*.

. Specify the *Port*.

. Add TLS context for inbound traffic, outbound traffic, or both:

+
To add TLS context for either traffic direction:
+

.. Click *Add TLS Context*.

.. Select a *Secret Group*.

.. Select a *TLS Context*.

.. Click *Ok*.

. Click *Next* or *Save & Apply*.

== Port Sharing



== See Also

* xref:flex-local-tls-config.adoc[Configuring TLS Context for Flex Gateway in Local Mode]
* xref:policies::policies-included-tls.adoc[Transport Layer Security Policy]